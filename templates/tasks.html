<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="/static/my_script.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>k-pop choreography search</title>
    <style>
        .videos-container {
            display: flex;
        }

        .column {
            flex: 1;
            padding: 10px;
        }

        .video-card {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<div class="logo">
    <img src="../static/logo.png" alt="Logotype">
</div>

<button id="en" class="translate_en header-item-lang-en"><img src="../static/uk.png" width="50" height="40"></button>

<button id="ru" class="translate_rus header-item-lang-en"><img src="../static/rus.jpg" width="50" height="40"></button>

<section>
    <form>
        <div class="container">

            <div class="frame">

                <p class="filter">FILTERS</p>

                <script>
                    const translations = {
                        "gender": "пол комманды",
                        "number": "число",
                        "BOY GROUP": "МУЖСКАЯ ГРУППА",
                        "GIRL GROUP": "ЖЕНСКАЯ ГРУППА",
                        "SWITCH GROUP": "СМЕШАННАЯ ГРУППА",
                        "1 MEMBER": "1 УЧАСТНИК",
                        "2 MEMBERS": "2 УЧАСТНИКА",
                        "3 MEMBERS": "3 УЧАСТНИКА",
                        "4 MEMBERS": "4 УЧАСТНИКА",
                        "5 MEMBERS": "5 УЧАСТНИКОВ",
                        "6 MEMBERS": "6 УЧАСТНИКОВ",
                        "7 MEMBERS": "7 УЧАСТНИКОВ"
                    };

                    document.getElementById("en").addEventListener("click", function() {
                        document.getElementsByClassName("filter")[0].innerHTML = "FILTERS";
                        translateTags("en");
                    });

                    document.getElementById("ru").addEventListener("click", function() {
                        document.getElementsByClassName("filter")[0].innerHTML = "ФИЛЬТРЫ";
                        translateTags("ru");
                    });

                    function translateTags(lang) {
                        document.querySelectorAll(".tags h5").forEach(function(tag) {
                            const originalText = tag.innerText;
                            if (translations[originalText]) {
                                tag.innerText = lang === "en" ? originalText : translations[originalText];
                            }
                        });

                        document.querySelectorAll(".tags input[type='checkbox']").forEach(function(checkbox) {
                            const originalText = checkbox.nextElementSibling.innerText;
                            if (translations[originalText]) {
                                checkbox.nextElementSibling.innerText = lang === "en" ? originalText : translations[originalText];
                            }
                        });
                    }
                </script>
                <div class="tags">
                    {% for group in filter_groups %}
                    <h5 class="title">{{ group['title'] }}</h5>
                    <center>
                        {% for filter in group['filters'] %}
                        {% if filter['code'] in request.args %}
                        <input type="checkbox" name="{{ filter['code'] }}" checked> {{ filter['name'] }}
                        <br>
                        {% else %}
                        <input type="checkbox" name="{{ filter['code'] }}"> {{ filter['name'] }} <br>
                        {% endif %}
                        {% endfor %}
                    </center>
                    {% endfor %}
                    <input type="submit" class="submit" value="Search"></p>
                </div>
            </div>
            <div class="frame2">
                <div class="searchbar">
                    <p><input type="search" name="q" class="search" placeholder="Search for the result"
                              value="{{ request.args.get('q', '') }}">
                        <input type="submit" class="submit" value="Search"></p>
                    <p>
                </div>
                {% if videos %}
                <div class="videos-container">

                    <div class="column">
                        <center>
                            {% for video in videos %}
                            {% if loop.index is even %}
                            <div class="video-card">
                                <center>
                                    <iframe width="320" height="240" src="{{ video }}"></iframe>
                                </center>
                            </div>
                            {% endif %}
                            {% endfor %}
                        </center>
                    </div>
                    <div class="column">

                        {% for video in videos %}
                        {% if loop.index is odd %}
                        <div class="video-card">
                            <center>
                                <iframe width="320" height="240" src="{{ video }}"></iframe>
                            </center>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <center><p class="zero"> no found</p></center>
                {% endif %}
                </p>
            </div>

        </div>
    </form>
</section>
</body>
</html>
